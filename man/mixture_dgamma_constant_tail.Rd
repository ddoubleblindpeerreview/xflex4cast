% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulation_functions.R
\name{mixture_dgamma_constant_tail}
\alias{mixture_dgamma_constant_tail}
\title{Generate Data from a Two-Component Discrete Mixture with Dynamic Tail}
\usage{
mixture_dgamma_constant_tail(
  n = 100,
  phi = 0.05,
  xi = 0.3,
  scale_dgp = 15,
  shape_dgamma = 5,
  beta_scale_dgamma = c(1, 1),
  probs = c(0.001, 0.01, 0.05, 0.25, 0.5, 0.75, 0.8, 0.9, 0.95, 0.99, 0.999, 0.9999),
  index = NULL
)
}
\arguments{
\item{n}{Integer. Number of observations to simulate.}

\item{phi}{Numeric. Exceedance probability threshold (e.g., 0.05 defines the top 5\% tail).}

\item{xi}{Numeric. Shape parameter of the discrete Generalized Pareto (DGP) distribution.}

\item{scale_dgp}{Numeric. Scale parameter for the DGP distribution.}

\item{shape_dgamma}{Numeric. Shape parameter for the discrete gamma distribution.}

\item{beta_scale_dgamma}{Numeric vector. Coefficients for modeling the scale parameter of the gamma distribution as a function of covariates.}

\item{probs}{Numeric vector. Quantile levels at which to compute the true quantiles of the generated distribution.}

\item{index}{Optional. If not NULL, an index variable will be added for tracking observations.}
}
\value{
A list with the following components:
\describe{
\item{data}{A \code{data.table} with covariates and generated outcome \code{y}.}
\item{pmf_dggp}{A matrix containing the probability mass function (PMF) values for the mixture.}
\item{true_quantiles}{A matrix of true quantiles for each observation at the levels specified in \code{probs}.}
}
}
\description{
Simulates a count outcome based on a discrete mixture model. The lower tail is modeled via a discrete gamma distribution with covariate-dependent scale, and the upper tail is complemented by a discrete Generalized Pareto distribution (DGP), adjusted to match a given exceedance probability threshold.
}
\details{
This function dynamically determines a cut-off threshold from the discrete gamma distribution such that the upper tail (defined by \code{phi}) is filled using a DGP distribution with adjusted mass. Covariate effects are modeled through the scale parameter using a linear predictor on the log scale.
}
\examples{
out <- mixture_dgamma_constant_tail()
head(out$data)

}
